<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Quebec City Map Explorer</title>
  <link rel="stylesheet" href="styles.css">
  <script src="shared.js" defer></script>
  <script src="snow.js" defer></script>
  <script src="data.js" defer></script>
  <script src="map.js" defer></script>
</head>
<body>
  <canvas id="snow-canvas" aria-hidden="true"></canvas>
  <div id="offline-banner" class="offline-banner" role="status" aria-live="polite" hidden>
    You are offline. The itinerary still works, but external links need internet.
  </div>

  <header class="site-header">
    <div class="nav-shell">
      <a class="brand" href="index.html">
        <span class="brand-mark">QC</span>
        <span class="brand-title">Quebec City Winter</span>
      </a>
      <button class="menu-toggle" type="button" aria-expanded="false" aria-controls="site-nav">Menu</button>
      <nav id="site-nav" class="site-nav">
        <a href="orientation.html">Orientation</a>
        <a href="map.html">Map</a>
        <a href="explore.html">Explore</a>
        <a href="eat.html">Eat</a>
        <a href="travel.html">Travel</a>
        <a href="packing.html">Packing</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="hero-card">
      <p class="eyebrow">Map Explorer</p>
      <h1>Pinch, Zoom, and Wander</h1>
      <p>
        A detailed sketch of Quebec City with every landmark pinned.
        Clusters break apart as you zoom in, AllTrails style.
      </p>
      <div class="hero-meta">
        <div class="pill">Drag to pan</div>
        <div class="pill">Pinch to zoom</div>
        <div class="pill">Clusters reveal detail</div>
      </div>
    </div>
  </section>

  <main>
    <section class="section">
      <div class="section-header">
        <h2>Map + Landmarks</h2>
        <p>Use filters to focus on sights, food, desserts, or logistics.</p>
      </div>
      <div class="map-controls" id="map-controls">
        <button class="button" type="button" data-zoom="in">Zoom +</button>
        <button class="button secondary" type="button" data-zoom="out">Zoom -</button>
        <button class="button secondary" type="button" data-zoom="reset">Reset</button>
      </div>
      <div class="filters" id="map-filters"></div>
      <div class="map-stage">
        <div>
          <div class="map-viewport" id="map-viewport">
            <div class="map-layer" id="map-layer">
              <svg viewBox="0 0 1600 1000" aria-label="Illustrated map of Quebec City">
                <defs>
                  <linearGradient id="river-grad" x1="0" x2="1" y1="0" y2="1">
                    <stop offset="0%" stop-color="#98c1d4" />
                    <stop offset="100%" stop-color="#6ea3ba" />
                  </linearGradient>
                  <linearGradient id="land-grad" x1="0" x2="0" y1="0" y2="1">
                    <stop offset="0%" stop-color="#f5efe5" />
                    <stop offset="100%" stop-color="#e2d6c7" />
                  </linearGradient>
                  <linearGradient id="cliff" x1="0" x2="0" y1="0" y2="1">
                    <stop offset="0%" stop-color="#c7b19a" />
                    <stop offset="100%" stop-color="#9e826b" />
                  </linearGradient>
                  <pattern id="snow" width="20" height="20" patternUnits="userSpaceOnUse">
                    <circle cx="4" cy="6" r="1.2" fill="rgba(255,255,255,0.7)" />
                    <circle cx="14" cy="12" r="1" fill="rgba(255,255,255,0.5)" />
                  </pattern>
                </defs>
                <rect width="1600" height="1000" fill="url(#snow)" />
                <path d="M0,650 C200,620 330,640 480,610 C640,570 820,600 980,560 C1160,510 1340,560 1600,520 L1600,1000 L0,1000 Z" fill="url(#river-grad)" />
                <path d="M0,0 H1600 V580 C1400,600 1240,590 1040,620 C820,660 600,660 420,630 C240,600 120,590 0,610 Z" fill="url(#land-grad)" />
                <path d="M420,400 C560,360 700,380 820,340 C980,290 1130,320 1280,290 L1280,420 C1120,440 980,460 840,490 C680,520 520,520 420,500 Z" fill="url(#cliff)" opacity="0.8" />
                <path d="M680,320 L900,300 L1060,330 L980,420 L760,400 Z" fill="#cbb39a" opacity="0.8" />
                <path d="M920,420 L1120,400 L1180,470 L1060,520 L900,500 Z" fill="#bfa78e" opacity="0.75" />
                <path d="M760,360 L980,350 L980,470 L760,480 Z" fill="none" stroke="#8f745e" stroke-width="6" stroke-dasharray="8 6" />
                <g fill="#2b4338" opacity="0.9">
                  <polygon points="260,480 300,380 340,480" />
                  <polygon points="320,480 360,380 400,480" />
                  <polygon points="1180,460 1210,380 1240,460" />
                </g>
                <g fill="#8c6f58">
                  <rect x="840" y="250" width="90" height="60" />
                  <rect x="860" y="220" width="20" height="30" />
                  <polygon points="830,250 885,200 940,250" fill="#a6876d" />
                  <polygon points="900,250 950,210 1000,250" fill="#b29278" />
                </g>
                <g stroke="#3f3a35" stroke-width="4" fill="none">
                  <path d="M960,460 L1020,520" />
                  <rect x="1000" y="520" width="40" height="20" />
                </g>
                <g stroke="#3f3a35" stroke-width="4" fill="none">
                  <path d="M880,430 L950,460" />
                  <circle cx="950" cy="460" r="10" />
                </g>
                <text x="60" y="610" fill="#3f3a35" font-size="24" font-family="Baskerville, Goudy Old Style, Palatino Linotype, Garamond, serif">St. Lawrence River</text>
                <text x="620" y="300" fill="#3f3a35" font-size="20" font-family="Baskerville, Goudy Old Style, Palatino Linotype, Garamond, serif">Upper Town</text>
                <text x="980" y="360" fill="#3f3a35" font-size="20" font-family="Baskerville, Goudy Old Style, Palatino Linotype, Garamond, serif">Old Quebec</text>
                <text x="1060" y="470" fill="#3f3a35" font-size="18" font-family="Baskerville, Goudy Old Style, Palatino Linotype, Garamond, serif">Lower Town</text>
              </svg>
              <div class="pin-layer" id="pin-layer"></div>
            </div>
          </div>
        </div>
        <aside class="map-panel">
          <h3 id="map-panel-title">Map Focus</h3>
          <p class="muted" id="map-panel-body">Tap a pin or cluster to explore. Zoom in to break clusters apart.</p>
          <div id="map-panel-tags" class="card-tags"></div>
          <div id="map-panel-links" class="map-panel-links"></div>
          <h4>Visible places</h4>
          <ul class="map-panel-list" id="map-list"></ul>
        </aside>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>Zoom in for every cafe, dessert, and snowy viewpoint.</p>
  </footer>

  <div id="toast" class="toast" role="status" aria-live="polite" hidden>
    You are offline. Connect to open external links.
  </div>
</body>
</html>
